<mvc:View controllerName="simulador.controller.Main"
  xmlns:mvc="sap.ui.core.mvc"
  xmlns:core="sap.ui.core"
  xmlns:l="sap.ui.layout"
  xmlns:m="sap.m"
  xmlns:u="sap.ui.unified"
  xmlns="sap.m">
  <Page title="{i18n>appTitle}">
    <content>

      <l:Grid defaultSpan="L6 M6 S12" hSpacing="1" vSpacing="1"
        xmlns:l="sap.ui.layout">

        <l:content>
          <!-- eRedes readings option panel -->

          <Panel headerText="{i18n>optionReadingsTtl}" class="sapUiSmallMarginTop" fitContainer="true">

            <l:Grid defaultSpan="L6 M6 S12" hSpacing="0" vSpacing="0"
              xmlns:l="sap.ui.layout">

              <l:content>

                <RadioButtonGroup selectedIndex="{= ${appFlowModel>/optionValEFRVisible} ? 0 : 1 }" select=".onOptionReadings">
                  <buttons>
                    <RadioButton text="{i18n>optionReadingsEredes}" />
                    <RadioButton text="{i18n>optionReadingsNoEredes}" />
                  </buttons>
                </RadioButtonGroup>
              </l:content>

              <l:content>
                <VBox justifyContent="Center" alignItems="End" fitContainer="true">
                  <Link text="{i18n>optionReadingsHelp}" endIcon="sap-icon://inspect" press=".onShowEredesReadingsHelp" />
                </VBox>
              </l:content>

            </l:Grid>
          </Panel>



        </l:content>

        <l:content>
          <!-- Manual consuption/readungs input option panel -->
          <Panel headerText="{i18n>optionValTtl}" class="sapUiSmallMarginTop" visible="{= !${appFlowModel>/optionValEFRVisible} }" fitContainer="true">

            <l:Grid defaultSpan="L6 M6 S12" hSpacing="0" vSpacing="0"
              xmlns:l="sap.ui.layout">

              <l:content>
                <VBox justifyContent="End" alignItems="Start" fitContainer="true">
                  <Text text="{i18n>optionVal}" />
                </VBox>
              </l:content>

              <l:content>
                <VBox justifyContent="Center" alignItems="End" fitContainer="true">
                  <Link text="{i18n>valEFRHelp}" endIcon="sap-icon://inspect" press=".onShowValEFRHelp" />
                </VBox>
              </l:content>

            </l:Grid>

            <l:Grid defaultSpan="L12 M12 S12" hSpacing="0" vSpacing="0"
              xmlns:l="sap.ui.layout">

              <l:content>
                <RadioButtonGroup select=".onOptionValEFRSelect" columns="4">
                  <buttons>
                    <RadioButton text="{i18n>optionEFRValTypeC}" />
                    <RadioButton text="{i18n>optionEFRValTypeR}" />
                    <RadioButton text="{i18n>optionEFRValTypeCR}" />
                    <RadioButton text="{i18n>optionEFRValNo}" />
                  </buttons>
                </RadioButtonGroup>
              </l:content>

              <l:content>
                <VBox justifyContent="Center" alignItems="Start" fitContainer="true" visible="{= ${appFlowModel>/optionValEFRMsgVisible} }" class="sapUiSmallMarginTop">
                  <HBox backgroundDesign="Solid">
                    <MessageStrip class="sapUiTinyMarginBottom sapUiSmallMarginBegin" text="{= ${appFlowModel>/optionValEFRMsg} }" type="{=
                      ${appFlowModel>/optionValEFRMsgType} === 3 ? 'Error'
                      : ${appFlowModel>/optionValEFRMsgType} === 2 ? 'Warning'
                      : ${appFlowModel>/optionValEFRMsgType} === 1 ? 'Information'
                      : 'Success'
                    }" showIcon="true">
                    </MessageStrip>

                  </HBox>
                </VBox>
              </l:content>

            </l:Grid>

          </Panel>
        </l:content>

      </l:Grid>

      <!-- eRedes file drop/upload zone panel -->
      <l:Grid defaultSpan="L6 M6 S12" hSpacing="1" vSpacing="1"
        xmlns:l="sap.ui.layout">

        <l:content>
          <Panel headerText="{i18n>uploadPanel}" class="sapUiSmallMarginTop" visible="{= ${appFlowModel>/optionValEFRVisible} }" fitContainer="true">
            <VBox id="uploadContainer" renderType="Bare" class="uploadArea">
              <core:HTML content='
            &lt;div id="dropzone" style="border:2px dashed #ccc; padding:20px; text-align:center;"&gt;{i18n>dropZoneText} {i18n>orDropHere}&lt;/div&gt;
            &lt;input type="file" id="fileInput" style="display:none"/&gt;
            ' />
            </VBox>
          </Panel>
        </l:content>

      </l:Grid>

      <!-- Table for readings/consuption registration panel -->
      <l:Grid defaultSpan="L12 M12 S12" hSpacing="1" vSpacing="1"
        xmlns:l="sap.ui.layout">

        <l:content>
          <Panel headerText="{i18n>tableTtl}" visible="{= !${appFlowModel>/optionValEFRVisible} }" fitContainer="true">
            <Button text="{i18n>addRow}" press=".onAddRow" class="sapUiTinyMarginTop" type="Transparent" />
            <Link text="{i18n>addRow}" Icon="sap-icon://inspect" press=".onAddRow" />
            <Table id="tblManual" items="{appFlowModel>/consReadRows}">
              <extension>
                <m:OverflowToolbar style="Clear">
                  <m:Title id="title" text="Products"/>
                  <m:ToolbarSpacer/>
                  <m:Button icon="sap-icon://sys-add" tooltip="{i18n>addRow}" press=".onAddRow"/>
                </m:OverflowToolbar>
              </extension>
              <headerToolbar>
                <Toolbar>
                  <Title text="{i18n>manualTableTitle}" />
                </Toolbar>
              </headerToolbar>
              <columns>
                <Column>
                  <Text text="{i18n>colFromDate}" />
                </Column>
                <Column>
                  <Text text="{i18n>colToDate}" />
                </Column>
                <Column>
                  <Text text="{i18n>colSimple}" />
                </Column>
                <Column visible="{= ${appFlowModel>/consColsVisible} }">
                  <Text text="{i18n>colConsVazio}" />
                </Column>
                <Column visible="{= ${appFlowModel>/consColsVisible} }">
                  <Text text="{i18n>colConsCheio}" />
                </Column>
                <Column visible="{= ${appFlowModel>/consColsVisible} }">
                  <Text text="{i18n>colConsPonta}" />
                </Column>
                <Column visible="{= ${appFlowModel>/readColsVisible} }">
                  <Text text="{i18n>colReadVazio}" />
                </Column>
                <Column visible="{= ${appFlowModel>/readColsVisible} }">
                  <Text text="{i18n>colReadCheio}" />
                </Column>
                <Column visible="{= ${appFlowModel>/readColsVisible} }">
                  <Text text="{i18n>colReadPonta}" />
                </Column>
                <Column hAlign="Center" width="4rem"></Column>
              </columns>
              <items>
                <ColumnListItem>
                  <cells>
                    <DatePicker value="{appFlowModel>fromDate}" />
                    <DatePicker value="{appFlowModel>toDate}" />
                    <Input value="{appFlowModel>simple}" />
                    <Input value="{appFlowModel>consEmpty}" />
                    <Input value="{appFlowModel>consFull}" />
                    <Input value="{appFlowModel>consRush}" />
                    <Input value="{appFlowModel>readEmpty}" />
                    <Input value="{appFlowModel>readFull}" />
                    <Input value="{appFlowModel>readRush}" />
                    <Button icon="sap-icon://delete" type="Transparent" press=".onDeleteRow" />
                  </cells>
                </ColumnListItem>
              </items>
            </Table>
          </Panel>
        </l:content>

      </l:Grid>

      <!-- Footer buttons -->
      <l:Grid defaultSpan="L12 M12 S12" hSpacing="1" vSpacing="1"
        xmlns:l="sap.ui.layout" visible="{= !${appFlowModel>/optionValEFRVisible} }">

        <l:content>
          <HBox justifyContent="End" class="sapUiSmallMarginTop">
            <Button text="{i18n>next}" type="Emphasized" press=".onNextFromMain"></Button>
          </HBox>
        </l:content>

      </l:Grid>

    </content>
  </Page>
</mvc:View>