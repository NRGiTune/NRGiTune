<mvc:View controllerName="simulador.controller.SavingsDialog"
  xmlns:mvc="sap.ui.core.mvc"
  xmlns="sap.m">

  <ScrollContainer vertical="true" height="100%" width="100%">
    <VBox class="sapUiMediumMargin">

      <!-- Header -->
      <Text text="As estimativas de poupança têm por base os valores reportados à Entidade Reguladora dos Serviços Energéticos (ERSE) pelos vários comercializadores..." class="sapUiSmallMarginTop" wrapping="true"/>

      <!-- Oferta verificada 
      <MessageStrip text="Ofertas comerciais (ERSE) - Última atualização: {/erse/lastUpdate}" type="Success" showIcon="true" class="sapUiSmallMarginTop"/>
-->
      <MessageStrip text="Ofertas comerciais (ERSE) - Última atualização:" type="Success" showCloseButton="false" showIcon="true" class="sapUiSmallMarginTop">
        <link>
          <Link text="{/erse/lastUpdate}" target="_blank" href="{/erse/link}" />
        </link>
      </MessageStrip>



      <Text text="A poupança estimada corresponde à diferença entre os valores de consumos submetidos e o valor estimado desta oferta..." class="sapUiSmallMarginTop" wrapping="true"/>

      <!-- Tabela -->
      <Table items="{/savings}" class="sapUiSmallMarginTop">
        <columns>
          <Column>
            <!-- <Text text="Termo"/> -->
          </Column>
          <Column hAlign="End">
            <Text text="Atual"/>
            <footer>
              <Text text="{path: '/total/current', formatter: '.formatter.formatCurrency'}" />
            </footer>
          </Column>
          <Column hAlign="End">
            <Text text="Esta oferta"/>
            <footer>
              <Text text="{path: '/total/offer', formatter: '.formatter.formatCurrency'}"/>
            </footer>
          </Column>
          <Column hAlign="End">
            <Text text="vs Atual"/>
            <footer>
              <!--
              <Text text="{/total/diff}" design="Bold" state="{/total/state}"/>
              <ObjectNumber number="{
						parts:[{path:'{/total/diff}'},{path:'CurrencyCode'}],
						type: 'sap.ui.model.type.Currency',
						formatOptions: {showMeasure: false}
					}" unit="" state="{/total/state}" />
-->


                 <ObjectNumber 
                 number="{path: '/total/diff', formatter: '.formatter.formatCurrency'}"
                 unit="" emphasized="true" state="{/total/state}" />
       


            </footer>
          </Column>
        </columns>
        <items>
          <ColumnListItem>
            <cells>
              <Text text="{term}"/>
              <VBox alignItems="End" >
                <Text text="{path: 'current01', formatter: '.formatter.formatCurrency'}"/>
                <Text text="{path: 'current02', formatter: '.formatter.formatCurrency'}" 
                visible="{= ${current02} !== 0 ? true : false }"/>
                <Text text="{path: 'current03', formatter: '.formatter.formatCurrency'}" 
                visible="{= ${current03} !== 0 ? true : false }"/>
              </VBox>
              <VBox alignItems="End" >
                <Text text="{path: 'offer01', formatter: '.formatter.formatCurrency'}"/>
                <Text text="{path: 'offer02', formatter: '.formatter.formatCurrency'}" 
                visible="{= ${offer02} !== 0 ? true : false }"/>
                <Text text="{path: 'offer03', formatter: '.formatter.formatCurrency'}" 
                visible="{= ${offer03} !== 0 ? true : false }"/>
              </VBox>
              <VBox alignItems="End" >
              <ObjectStatus text="{path: 'diff', formatter: '.formatter.formatCurrency'}"
              state="{state}"/>
              </VBox>
            </cells>
          </ColumnListItem>
        </items>
      </Table>

      <!-- Totais
      <HBox justifyContent="SpaceBetween" class="sapUiMediumMarginTop">
        <Text text="Total" design="Bold"/>
        <ObjectStatus text="{/total/offer}" state="Success"/>
        <ObjectStatus text="{/total/diff}" state="Success"/>
      </HBox>

      <Text text="Caso encontres alguma discrepância nos cálculos, por favor submete um alerta aqui." class="sapUiSmallMarginTop" wrapping="true"/>
       -->

    </VBox>
  </ScrollContainer>
</mvc:View>
